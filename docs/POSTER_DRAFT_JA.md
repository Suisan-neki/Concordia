# Concordia — 圧力なく、誤解なく、透明に「理解の痕跡」を残す

タグライン: 圧力の可視化と最小化（Zero Pressure Architecture）— 内在的脅威への設計

## はじめに

### 診療室という場
診察室で「だいたい分かった気がするけど、もう少し聞きたいな」と思ったことはありませんか？
説明する側も「時間がない中で、誤解なく伝わっただろうか」と不安になることがあります。

医師は「訴訟や誤解を避けたい」という恐れを抱き、  
患者は「その場で本音を言いづらい」という不安を抱える。  
ここにあるのは"情報非対称"ではなく、**心理的圧力の非対称**である。

### 気づき
「完全な合意」は存在しない。  
人間の理解は揺らぎ、言葉にできない不安は残る。  
だがそれでも、**「理解しようとした軌跡」だけは技術的に残すことができる。**

### Concordiaの解
Concordia は、そんな"場の圧力"で生まれるモヤモヤを、記録や署名で人を追い込まずに、
裏側の仕掛けでそっとやわらげます。やることはいつも通り、説明する、質問する、言い直す、
（いまは）保留する。あとは裏側で"理解の痕跡"を改ざん検知つきで残し、後から誰でも手元で
確かめられるようにします。

対話の流れを壊さないまま、必要なセキュリティと検証性だけを静かに支える——
それが Concordia の目指す設計です。

### 背景：なぜ生まれたか
以前の取り組みでは、患者情報を安全に共有するため署名や暗号化、アクセス制御などを整えましたが、
- 「合意を取る」こと自体が場の圧力になり、患者は話しづらく、医師は防衛的になりがちだった
- セキュリティ強化が「証拠作り」に傾き、対話の質が上がらないことがあった

そこで考え直したのが：
- 同意を「はい／いいえ」で切らず、途中の理解の流れを扱う。記録対象を「合意そのもの」から「理解の痕跡」へ
- 証明ではなく、可視化と最小化。手元で検証できる軽い仕組みにする
- 圧力がゼロだと証明するのではなく、**「圧力を可視化して小さくする」**

## 内在的脅威（Inherent Threats）
本システムが相手にする「脅威」は外部攻撃者ではない。脅威は内部に宿る。

- 医師の「疑われる恐れ」
  - よくある懸念: 説明が防衛的になる、「証拠作り」に意識が寄る、訴訟を過度に意識する
  - 対応: 改ざん検知つきの時系列記録（連鎖＋時刻）で「後から動かない」を示す。質問は学びの機会として前向きに扱う（運用）。
- 聞き手の「発言しづらさ」
  - よくある懸念: 権威・時間・専門用語への戸惑いで発言しづらい。
  - 対応: 「保留できる」「後から確認できる」を明示（運用）。
- 「晒されるリスク」
  - よくある懸念: 本人や家族が内容を曲解し、SNSに投稿してしまう。投稿が一部だけ切り取られ拡散されて文脈が失われ、“晒し”となって誤解や萎縮につながる。
  - 対応: 最小開示（閲覧権限を絞る）と公開範囲への注意喚起（運用）、全履歴で文脈を保持。
- システムの「圧力化」
  - よくある懸念: 合意を急かす、スコアで評価する、記録が自己目的化する
  - 対応: 合意や撤回など重要な操作にだけ署名を付け、スコアは出さず提案テキストのみ。オプトアウト（使わない選択）の導入は検討中。

## ゼロプレッシャー合意（Zero Pressure Agreement, ZPA）
- 目指す状態: 圧力や強制の痕跡をできるだけ小さくし、説明と選択（合意・保留・撤回）を対等に扱い、その過程を第三者が手元で確かめられること。
- 満たしたい条件
  - 自発性: 合意・保留・撤回を対等に選べる（運用で保留や後日の確認を前提に）。
  - 情報性: 説明・質問・再説明の痕跡を残す（イベントを連鎖で保持）。
  - 範囲性: 目的・期間・開示範囲を明示する（purpose、ttl、scope）。
  - 可撤回性: 追記・訂正・撤回の運用。
  - 検証可能性: 署名・時刻・ハッシュ（要約）の再計算で手元確認できる。
 - しないこと（設計上の禁止）
  - ランキングやスコアでの評価、強制導線、見せすぎの透明性、記録の自己目的化。


## 2. 現状と今後の問い
 - 実装できていること
   - 理解行動の記録（Merkle チェーン）: 説明・質問・言い直し・合意・再閲覧を「外に表れた行動」として残します。
   - 改ざん検知: 各記録を、ひとつ前の要約（ハッシュ）と時刻でつなぎ、手元で再計算できます。
   - 電子署名と時刻: 合意や撤回など大事な操作だけ、本人の電子署名（Ed25519）を付けます。
   - 「責めない」見え方: Calm、Observe、Focus の3メッセージで雰囲気だけを返し、点数や比較はしません。
   - 検証CLI: `scripts/verify_chain.py` で手元確認が可能です。

 - いま確かめたいこと（医療現場での価値と受容）
   - 医療現場での活用価値: 「理解の痕跡」という概念に実際のメリットはあるか？
   - EHRとの差別化: 既存システムと役割がぶつからず共存できるか？どの深さでつなぐのが現実的か（軽／中／重）？
   - 受容性: ゼロプレッシャーの考え方が現場に受け入れられるか？「責めない」表示で場の圧力は下がるか？
   - 使い方: 導入はどう進めれば現場の負担を増やさないか？

 - 技術的な課題
   - LLM評価の扱い: 医療情報を外部APIに送っていいのか？プロンプトインジェクション、バイアス、責任の問題はどうする？


## 3. 設計と技術（どう解くか）
- 動かない記録を軽く作る: 決めた形式で記録し、直前の要約（ハッシュ）と時刻でつなぎます。
- 強制でないことを示す: 電子署名と時刻で「押させられていない」ことを裏づけます。
- 見せすぎない透明性: 見せる相手・期間・目的を最小に。必要な相手にだけ、必要な期間だけ見せます。
- 個票は見せず合計だけ: 必要なら少量のノイズ（差分プライバシー）を加えて、再識別のリスクを下げます。
- 検証は裏側とCLI（コマンドライン実行）で行います。

## 4. EHRとの協働
 - EHRの役割
   - 医療行為の事実（所見／検査／指示／処方）を正確に記録する。法務・請求の証跡として機能する。
 - EHRだけでは不足しているもの
   - 対話の過程や理解の揺れの記録
   - 説明のプロセス（「後追いの"説明済み"作り」に陥りやすい）
 - Concordiaが補うもの
   - 説明・質問・言い直し・保留などの「理解行動」の痕跡と、手元での検証（改ざん検知）
   - EHRとの接続は診療メモ末尾の1行リンクだけ。詳細ログはEHRに埋め込まず、監査や評価に使わない（責めない設計）
   - EHRは「何をしたか」を記録し、Concordiaは「どう理解し合ったか」を改ざん検知つきで残す
   - 両方を見ることで、医療行為と理解プロセスの両方を後から確認できる