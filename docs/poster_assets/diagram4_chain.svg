<svg xmlns="http://www.w3.org/2000/svg" width="900" height="300" viewBox="0 0 900 300">
  <style>
    .box{fill:#fff;stroke:#111;stroke-width:2}
    .label{font-family:system-ui, sans-serif;font-size:14px;fill:#111}
    .title{font-weight:700}
    .arrow{stroke:#111;stroke-width:2;marker-end:url(#arrow)}
    .cap{font-size:12px;fill:#333}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#111" />
    </marker>
  </defs>
  <text class="label title" x="300" y="24">タイムラインと鎖どめ（prev_hash） + 日次アンカー</text>

  <!-- events chain -->
  <rect class="box" x="40" y="70" width="150" height="70" rx="8"/>
  <text class="label" x="55" y="95">E1: present</text>
  <text class="cap" x="55" y="115">curr_hash=h1</text>

  <rect class="box" x="230" y="70" width="150" height="70" rx="8"/>
  <text class="label" x="245" y="95">E2: clarify</text>
  <text class="cap" x="245" y="115">prev=h1, curr=h2</text>

  <rect class="box" x="420" y="70" width="150" height="70" rx="8"/>
  <text class="label" x="435" y="95">E3: re_explain</text>
  <text class="cap" x="435" y="115">prev=h2, curr=h3</text>

  <rect class="box" x="610" y="70" width="150" height="70" rx="8"/>
  <text class="label" x="625" y="95">E4: agree</text>
  <text class="cap" x="625" y="115">prev=h3, curr=h4</text>

  <line class="arrow" x1="190" y1="105" x2="230" y2="105"/>
  <line class="arrow" x1="380" y1="105" x2="420" y2="105"/>
  <line class="arrow" x1="570" y1="105" x2="610" y2="105"/>
  <text class="cap" x="195" y="95">prev_hash</text>
  <text class="cap" x="385" y="95">prev_hash</text>
  <text class="cap" x="575" y="95">prev_hash</text>

  <!-- day root + anchor -->
  <rect class="box" x="340" y="180" width="220" height="70" rx="8"/>
  <text class="label title" x="360" y="205">日次ルート（MMR想定）</text>
  <text class="cap" x="360" y="228">day_root = f(h1..hN)</text>

  <line class="arrow" x1="450" y1="140" x2="450" y2="180"/>
  <text class="cap" x="455" y="160">集約</text>

  <rect class="box" x="600" y="180" width="200" height="70" rx="8"/>
  <text class="label title" x="620" y="205">外部アンカー（OTS）</text>
  <text class="cap" x="620" y="228">timestamp(token)</text>

  <line class="arrow" x1="560" y1="215" x2="600" y2="215"/>
</svg>

